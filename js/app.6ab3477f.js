(function(){"use strict";var e={2510:function(e,t,s){var o=s(5130),n=s(2261),i=s(6768);const r={class:"container"};function l(e,t){const s=(0,i.g2)("router-link"),o=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",r,[t[2]||(t[2]=(0,i.Lk)("h1",null,'Игра "Сапёр"',-1)),(0,i.Lk)("nav",null,[(0,i.Lk)("ul",null,[(0,i.Lk)("li",null,[(0,i.bF)(s,{to:"/settings"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("Настройки")]))),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(s,{to:"/leaderboard"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Таблица лидеров")]))),_:1})])])]),(0,i.bF)(o)])}var a=s(1241);const u={},c=(0,a.A)(u,[["render",l]]);var d=c,m=s(1387),h=s(4232);const v={class:"settings"},p=["value","id"],f=["for"],g={class:"choice-level"},b={key:0,class:"custom-options"},k=["max"];function C(e,t,s,n,r,l){return(0,i.uX)(),(0,i.CE)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.levels,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"choice-level",key:e.text},[(0,i.bo)((0,i.Lk)("input",{type:"radio",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedLevel=e),id:e.text},null,8,p),[[o.XL,r.selectedLevel]]),(0,i.Lk)("label",{for:e.text},(0,h.v_)(e.text)+", "+(0,h.v_)(e.row)+"*"+(0,h.v_)(e.col)+", "+(0,h.v_)(e.mines)+" мин",9,f),t[6]||(t[6]=(0,i.Lk)("br",null,null,-1))])))),128)),(0,i.Lk)("div",g,[(0,i.bo)((0,i.Lk)("input",{type:"radio",id:"custom",value:"custom","onUpdate:modelValue":t[1]||(t[1]=e=>r.selectedLevel=e)},null,512),[[o.XL,r.selectedLevel]]),t[10]||(t[10]=(0,i.Lk)("label",{for:"custom"},"Кастомный режим",-1)),"custom"===r.selectedLevel?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.Lk)("label",null,[t[7]||(t[7]=(0,i.eW)("Кол-во рядов: ")),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>r.customRow=e),min:"2",max:"50"},null,512),[[o.Jo,r.customRow,void 0,{number:!0}]])]),(0,i.Lk)("label",null,[t[8]||(t[8]=(0,i.eW)("Кол-во колонок: ")),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>r.customCol=e),min:"2",max:"50"},null,512),[[o.Jo,r.customCol,void 0,{number:!0}]])]),(0,i.Lk)("label",null,[t[9]||(t[9]=(0,i.eW)("Кол-во мин: ")),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>r.customMines=e),min:"1",max:l.maxMines},null,8,k),[[o.Jo,r.customMines,void 0,{number:!0}]])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.startGame&&l.startGame(...e))},"Начать игру")])}s(4114);var L={data(){return{levels:[{text:"Простой",row:8,col:8,mines:10},{text:"Средний",row:16,col:16,mines:40},{text:"Сложный",row:32,col:16,mines:100}],selectedLevel:null,customCol:2,customRow:2,customMines:2}},computed:{maxMines(){return this.customRow*this.customCol-1}},methods:{startGame(){let e;if("custom"===this.selectedLevel){if(this.customMines>=this.maxMines)return void alert("Слишком много мин!");if(this.customRow>50||this.customCol>50)return void alert("Слишком большие значения полей!");e={row:this.customRow,col:this.customCol,mines:this.customMines}}else{if(!this.selectedLevel)return void alert("Пожалуйста, выберите уровень игры!");e={row:this.selectedLevel.row,col:this.selectedLevel.col,mines:this.selectedLevel.mines}}this.$router.push({path:"/game",query:{row:e.row,col:e.col,mines:e.mines}})}}};const w=(0,a.A)(L,[["render",C],["__scopeId","data-v-b71f05d2"]]);var y=w;const _={class:"game"},E={class:"description"},M={key:0,class:"status"},x={key:1,class:"status"},O={class:"buttons"},X={class:"board"},F={class:"game-board"},W=["onClick","onContextmenu"];function I(e,t,s,n,r,l){const a=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",_,[(0,i.Lk)("div",E,[(0,i.Lk)("h3",null,"Размер поля: "+(0,h.v_)(r.row)+" x "+(0,h.v_)(r.col),1),(0,i.Lk)("h3",null,"Доступные флажки: "+(0,h.v_)(r.mines-r.totalFlags),1),(0,i.Lk)("h3",null,"Время: "+(0,h.v_)(r.time)+" секунд",1),!0===r.gameWin?((0,i.uX)(),(0,i.CE)("h3",M,"Вы выиграли!")):(0,i.Q3)("",!0),!0===r.gameOver?((0,i.uX)(),(0,i.CE)("h3",x,"Вы проиграли!")):(0,i.Q3)("",!0),(0,i.Lk)("div",O,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.restartGame&&l.restartGame(...e))},"Перезапуск"),(0,i.bF)(a,{to:"/"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.Lk)("button",null,"Назад",-1)]))),_:1})])]),(0,i.Lk)("div",X,[(0,i.Lk)("div",F,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.board,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:(0,h.C4)(["cell",{opened:e.opened,flagged:e.flagged,questioned:e.questioned,mined:e.mined&&(r.gameOver||r.gameWin)}]),onClick:e=>l.openCell(t,s),onContextmenu:(0,o.D$)((e=>l.markCell(t,s)),["prevent"])},[e.opened&&e.count>0?((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,h.C4)("mine-"+e.count)},(0,h.v_)(e.count),3)):(0,i.Q3)("",!0)],42,W)))),128))])))),128))])])])}s(8111),s(7588);const q=(0,n.nY)("recordStore",{state:()=>({records:JSON.parse(localStorage.getItem("records"))||[]}),actions:{addRecord(e){this.records.push(e),this.records.sort(((e,t)=>e.time-t.time)),this.records.length>10&&(this.records=this.records.slice(0,10)),this.saveRecords()},saveRecords(){localStorage.setItem("records",JSON.stringify(this.records))}},getters:{getRecords:e=>e.records}}),R={data(){return{board:[],row:Number(this.$route.query.row)||8,col:Number(this.$route.query.col)||8,mines:Number(this.$route.query.mines)||10,gameStart:!1,gameOver:!1,gameWin:!1,firstMove:!0,openedCells:0,markedCells:0,totalFlags:0,time:0,timer:null,directions:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]}},created(){this.initBoard()},methods:{initBoard(){this.board=Array.from({length:this.row},((e,t)=>Array.from({length:this.col},((e,t)=>({opened:!1,flagged:!1,questioned:!1,mined:!1,count:0})))))},startTimer(){this.timer=setInterval((()=>{this.time++}),1e3)},stopTimer(){clearInterval(this.timer)},putMine(e,t){let s=this.mines;while(s>0){const o=Math.floor(Math.random()*this.row),n=Math.floor(Math.random()*this.col);o===e&&n===t||this.board[o][n].mined||(this.board[o][n].mined=!0,this.countingNumbersOnCell(o,n),s--)}},countingNumbersOnCell(e,t){this.directions.forEach((([s,o])=>{const n=e+s,i=t+o;n>=0&&n<this.row&&i>=0&&i<this.col&&this.board[n][i].count++}))},openCell(e,t){if(this.gameOver)return;this.gameStart||(this.startTimer(),this.gameStart=!0),this.firstMove&&(this.firstMove=!1,this.putMine(e,t));const s=this.board[e][t];if(!(s.flagged||s.questioned||s.opened))if(s.mined)this.openedAllMines();else{s.opened=!0,this.openedCells++,0===s.count&&this.openedNeighbors(e,t);const o=this.row*this.col,n=o-this.mines;this.openedCells===n&&this.gameIsWon()}},openedNeighbors(e,t){this.directions.forEach((([s,o])=>{const n=e+s,i=t+o;if(n>=0&&n<this.row&&i>=0&&i<this.col){const e=this.board[n][i];e.opened||e.flagged||e.mined||this.openCell(n,i)}}))},markCell(e,t){if(this.gameOver||this.gameWin)return;this.gameStart||(this.startTimer(),this.gameStart=!0);const s=this.board[e][t];s.opened||(s.flagged||s.questioned?s.flagged?(s.flagged=!1,s.questioned=!0,this.totalFlags--,s.mined&&this.markedCells--):s.questioned&&(s.questioned=!1):this.totalFlags<this.mines?(s.flagged=!0,this.totalFlags++,s.mined&&this.markedCells++):s.questioned=!0,this.markedCells===this.mines&&this.gameIsWon())},openedAllMines(){this.gameWin||(this.gameOver=!0),this.stopTimer()},gameIsWon(){this.gameWin=!0,this.openedAllMines(),this.stopTimer();const e=q(),t={date:(new Date).toLocaleString(),row:this.row,col:this.col,time:this.time,mines:this.mines};e.addRecord(t)},restartGame(){this.initBoard(),this.stopTimer(),this.time=0,this.markedCells=0,this.openedCells=0,this.totalFlags=0,this.gameWin=!1,this.gameStart=!1,this.gameOver=!1,this.firstMove=!0}}},S=()=>{(0,o.$9)((e=>({"7ff40b76":e.row})))},A=R.setup;R.setup=A?(e,t)=>(S(),A(e,t)):S;var N=R;const T=(0,a.A)(N,[["render",I],["__scopeId","data-v-01ecbd75"]]);var j=T;const G={class:"leaderboard"};function V(e,t,s,o,n,r){return(0,i.uX)(),(0,i.CE)("div",G,[t[0]||(t[0]=(0,i.Lk)("h2",null,"Таблица рекордов",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.records,((e,t)=>((0,i.uX)(),(0,i.CE)("li",{key:t}," #"+(0,h.v_)(t+1)+" - Время: "+(0,h.v_)(e.time)+" сек, Дата: "+(0,h.v_)(e.date)+", Поле: "+(0,h.v_)(e.row)+"*"+(0,h.v_)(e.col)+", Мины: "+(0,h.v_)(e.mines),1)))),128))])])}var $=s(144),J={setup(){const e=(0,$.KR)([]);return(0,i.sV)((()=>{const t=q();e.value=t.getRecords})),{records:e}}};const K=(0,a.A)(J,[["render",V],["__scopeId","data-v-102fb1fe"]]);var U=K;function Q(e,t){return(0,i.uX)(),(0,i.CE)("h1",null,"Такой страницы нет")}const B={},D=(0,a.A)(B,[["render",Q]]);var P=D;const Y=[{path:"/",redirect:"/settings"},{path:"/settings",component:y},{path:"/game",component:j},{path:"/leaderboard",component:U},{path:"/:pathMatch(.*)*",component:P}],z=(0,m.aE)({history:(0,m.LA)(),routes:Y});var H=z;const Z=(0,o.Ef)(d),ee=(0,n.Ey)();Z.use(ee),Z.use(H),Z.mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],i=e[c][2];for(var l=!0,a=0;a<o.length;a++)(!1&i||r>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[a])}))?o.splice(a--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,r=o[0],l=o[1],a=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(a)var c=a(s)}for(t&&t(o);u<r.length;u++)i=r[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=self["webpackChunkminesweeper_vue"]=self["webpackChunkminesweeper_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(2510)}));o=s.O(o)})();
//# sourceMappingURL=app.6ab3477f.js.map